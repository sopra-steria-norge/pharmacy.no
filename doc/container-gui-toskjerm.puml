@startuml

title "Toskjerms" GUI for testing

actor Apotekansatt
actor Farmasøyt

box "DIFA"
  participant DifaGUI
  participant DIFA
end box

group Dialog med DIFA
Apotekansatt -> DifaGUI: Angi person (fødselsnummer eller navn + fødselsdato)
activate DifaGUI
Apotekansatt <-- DifaGUI: List resepter
deactivate DifaGUI
Apotekansatt -> DifaGUI: Velg resept
activate DifaGUI
DifaGUI-> DIFA: Hent resept 
DIFA -> DIFA: Hent varer i byttegruppe
DIFA -> DIFA: Påfør informasjon og varsler
DifaGUI <-- DIFA
Apotekansatt <--DifaGUI: Varsler, byttealternativer <i>uten</i> priser
deactivate DifaGUI
Apotekansatt -> DifaGUI: Velg legemiddel, angi pris
Apotekansatt <-- DifaGUI: Klargjør reseptetikett, ta opp print-dialog
note right of Apotekansatt: DIFA GUI åpner nettlesers print-dialog
Apotekansatt -> Apotekansatt: Skriv reseptetikett
Apotekansatt -> DifaGUI: Scan strekkode på etikett og pakning
note right of Apotekansatt: Strekkodescanner i tastaturmodus
DifaGUI -> DIFA: Teknisk kontroll
Apotekansatt -> Farmasøyt: "Kan du gjøre\nfarmasøytkontroll"
Farmasøyt -> DifaGUI: Vis resepter klar til farmasøytkontroll
Farmasøyt -> DifaGUI: Utfør farmasøytkontroll
Apotekansatt <- Farmasøyt: "Vær så god"
Apotekansatt -> DifaGUI: Utlever
Apotekansatt <-- DifaGUI: Vis reseptoversikt, egenandel, mellomlegg
Apotekansatt -> Apotekansatt: Registrer signatur og betaling
Apotekansatt -> DifaGUI: Registrer utlevering
activate DifaGUI
DifaGUI -> DIFA: Registrer utlevering
DIFA ->]: Utleveringsmelding
DIFA ->]: Refusjonskrav
Apotekansatt <-- DifaGUI
deactivate DifaGUI

@enduml
